{"version":3,"sources":["../src/index.js"],"names":["Comtele","authKey","sender","receivers","content","Promise","resolve","reject","method","uri","headers","form","err","res","process","env","hasOwnProperty","console","log","comtele","COMTELE_KEY","COMTELE_SENDER","$","set","e","message"],"mappings":";;;;;;;;AAAA;;AACA;;;;;;;;IAEMA,O;AACF,qBAAYC,OAAZ,EAAqBC,MAArB,EAA4B;AAAA;;AACxB,aAAKD,OAAL,GAAeA,OAAf;AACA,aAAKC,MAAL,GAAcA,MAAd;AACH;;;;6BAEIC,S,EAAWC,O,EAAQ;AAAA;;AACpB,mBAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpC,uCAAQ;AACJC,4BAAQ,MADJ;AAEJC,yBAAK,wCAFD;AAGJC,6BAAS;AACL,wCAAgB,kBADX;AAEL,oCAAY,MAAKT;AAFZ,qBAHL;AAOJU,0BAAM;AACFT,gCAAQ,MAAKA,MADX;AAEFC,4CAFE;AAGFC;AAHE;AAPF,iBAAR,EAYG,UAACQ,GAAD,EAAMC,GAAN,EAAc;AACb,wBAAID,GAAJ,EAASL,OAAOK,GAAP,EAAT,KACKN;AACR,iBAfD;AAgBH,aAjBM,CAAP;AAkBH;;;;;;kBAGU,YAAM;AACjB,QAAG;AACC,YAAG,CAACQ,QAAQC,GAAR,CAAYC,cAAZ,CAA2B,aAA3B,CAAD,IAA8C,CAACF,QAAQC,GAAR,CAAYC,cAAZ,CAA2B,gBAA3B,CAAlD,EAA+F;AAC3FC,oBAAQC,GAAR,CAAY,oFAAZ;AACH,SAFD,MAGI;AACA,gBAAMC,UAAU,IAAInB,OAAJ,CAAYc,QAAQC,GAAR,CAAYK,WAAxB,EAAqCN,QAAQC,GAAR,CAAYM,cAAjD,CAAhB;AACAC,qBAAEC,GAAF,CAAM,SAAN,EAAiBJ,OAAjB;AACH;AACJ,KARD,CASA,OAAOK,CAAP,EAAU;AACNP,gBAAQC,GAAR,oBAA6BM,EAAEC,OAA/B;AACH;AACJ,C","file":"index.js","sourcesContent":["import { $ } from \"@dekproject/scope\";\r\nimport request from 'request';\r\n\r\nclass Comtele{\r\n    constructor(authKey, sender){\r\n        this.authKey = authKey;\r\n        this.sender = sender;\r\n    }\r\n\r\n    send(receivers, content){\r\n        return new Promise((resolve, reject) => {\r\n            request({\r\n                method: \"POST\",\r\n                uri: \"https://sms.comtele.com.br/api/v2/send\",\r\n                headers: {\r\n                    \"content-type\": \"application/json\",\r\n                    \"auth-key\": this.authKey\r\n                },\r\n                form: {\r\n                    sender: this.sender,\r\n                    receivers,\r\n                    content \r\n                }\r\n            }, (err, res) => {\r\n                if (err) reject(err);   \r\n                else resolve();\r\n            });\r\n        });\r\n    }\r\n}\r\n\r\nexport default () => {\r\n    try{\r\n        if(!process.env.hasOwnProperty('COMTELE_KEY') || !process.env.hasOwnProperty('COMTELE_SENDER')){\r\n            console.log('[ Comtele ] - There is no COMTELE_KEY or COMTELE_SENDER variable in the .env file.');\r\n        }\r\n        else{\r\n            const comtele = new Comtele(process.env.COMTELE_KEY, process.env.COMTELE_SENDER);\r\n            $.set(\"comtele\", comtele);\r\n        }\r\n    }\r\n    catch (e) {\r\n        console.log(`[ Comtele ] - ${e.message}`);\r\n    }\r\n}\r\n"]}